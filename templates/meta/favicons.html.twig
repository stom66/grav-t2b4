{% spaceless %}

    {% set theme_config = attribute(config.themes, config.system.pages.theme) %}
    {% set favicon      = theme_config.favicon %}

    {% set ico          = media['user://images/icons/'~theme_config.favicon.ico].url() ?: "favicon.ico" %}
    {% set png          = media['user://images/icons/'~theme_config.favicon.png] ?: "favicon.png" %}
    {% set svg          = media['user://images/icons/'~theme_config.favicon.svg].url() ?: "favicon.svg" %}
    {% set mstile_sq    = media['user://images/icons/'~theme_config.favicon.mstile_sq] ?: "favicon.ico" %}
    {% set mstile_re    = media['user://images/icons/'~theme_config.favicon.mstile_re] ?: "favicon.ico" %}

{% endspaceless %}
          <!-- Favicons and app icons -->
{% if ico %}
            <link rel="shortcut icon" href="{{ ico }}" />
            <link rel="icon"          href="{{ ico }}" sizes="16x16 32x32 48x48" />

{% endif %}
{% if favicon.png %}
            <link rel="icon" href="{{ png.resize(256).url() }}" sizes="256x256" type="image/png"  />
            <link rel="icon" href="{{ png.resize(192).url() }}" sizes="192x192" type="image/png" />
            <link rel="icon" href="{{ png.resize(096).url() }}" sizes="96x96"   type="image/png" />
            <link rel="icon" href="{{ png.resize(032).url() }}" sizes="32x32"   type="image/png" />
            <link rel="icon" href="{{ png.resize(016).url() }}" sizes="16x16"   type="image/png" />
            <link rel="apple-touch-icon" href="{{ png.resize(180).url() }}" sizes="180x180" />
            <link rel="apple-touch-icon" href="{{ png.resize(152).url() }}" sizes="152x152" />
            <link rel="apple-touch-icon" href="{{ png.resize(144).url() }}" sizes="144x144" />
            <link rel="apple-touch-icon" href="{{ png.resize(120).url() }}" sizes="120x120" />
            <link rel="apple-touch-icon" href="{{ png.resize(114).url() }}" sizes="114x114" />
            <link rel="apple-touch-icon" href="{{ png.resize(076).url() }}" sizes="76x76" />
            <link rel="apple-touch-icon" href="{{ png.resize(072).url() }}" sizes="72x72" />
            <link rel="apple-touch-icon" href="{{ png.resize(060).url() }}" sizes="60x60" />
            <link rel="apple-touch-icon" href="{{ png.resize(057).url() }}" sizes="57x57" />

{% endif %}
{% if favicon.svg %}
            <link rel="mask-icon" href="{{ svg }}" color="#2b5797" />

{% endif %}
            
          <!-- Mobile/desktop app and viewport settings -->
            <meta name="apple-mobile-web-app-capable"          content="{{ theme_config.ios.app_capable }}">
            <meta name="apple-mobile-web-app-status-bar-style" content="{{ theme_config.ios.theme_color }}">
            <meta name="mobile-web-app-capable"                content="{{ theme_config.chrome.app_capable }}">
            <meta name="theme-color"                           content="{{ theme_config.chrome.theme_color }}" />
    
          <!-- Microsoft tiles -->
{% if theme_config.ms.browserconfig!='' %}
            <meta name="msapplication-config"                  content="{{ base_url ~ theme_config.ms.browserconfig }}">
{% endif %}
            <meta name="msapplication-navbutton-color"         content="{{ theme_config.ms.theme_color }}" />
            <meta name="msapplication-TileColor"               content="{{ theme_config.ms.tile_color }}" />
            <meta name="msapplication-TileImage"               content="{{ mstile_sq.resize(144).url() }}" />